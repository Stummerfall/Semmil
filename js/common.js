$(document).ready(function(){var e,n,a,t,s=$(window).width(),l=$(window).height();function i(e,n,a,i){var t=$("."+e).offset().top,o=$("."+e).height(),r=.5-n/s,d=(t+o/2-a)/l;$("#"+e+"-parallax .parallax__item").each(function(e,n){var a=parseInt($(n).data("offset")),t="translate3d("+Math.round(r*a)+"px,"+Math.round(d*a)+"px, 0)";i?$(n).css({transform:t+i}):$(n).css({transform:t})})}function d(){var e=$("section.order"),n=+e.find(".pages-num").val(),a=e.find("input#adaptive"),t=e.find(".breakpoints"),i=+t.find(".break-num").val(),o=t.find("input[name='breakpoints-num']");if(0<n)var r=2500+2e3*(n-1);else r=0;if(a.prop("checked"))if(t.removeClass("hidden"),o.val(i),1<i)var d=1+(i-1)/2;else d=1;else{t.addClass("hidden");d=1;o.val("1")}var s=e.find("input#dynamics"),l=e.find(".field-comment"),u=e.find("input[name='isDynamics']");s.prop("checked")?(l.addClass("dynamics-checked"),u.val("Требуется динамика на CSS3 и JS")):(l.removeClass("dynamics-checked"),u.val("Динамика на CSS3 и JS не требуется"));var c=e.find("ul.choice").find("input:checked"),m=c.attr("data-num"),f=c.attr("data-text");e.find("input[name='widtype']").val(f);var h=r*m*d,p=e.find(".total"),v=e.find("input[name='total']");p.text(h),v.val(h)}$(window).bind("resize",function(){s=$(window).width(),l=$(window).height()}),$(".header-navigation").on("click",function(){$(this).toggleClass("opened")}),t=$(".stages").find(".stages__item"),$(window).bind("scroll",function(){t.each(function(e,n){$(window).scrollTop()+l/2>$(n).offset().top&&(t.removeClass("hover"),$(n).addClass("hover"))})}),$(".read-more").on("click",function(e){e.preventDefault();var n=$(this).attr("href"),a=$(n).offset().top;$("body,html").animate({scrollTop:a},1e3)}),0<$(".promo").length&&$(".header, .promo").on("mousemove",function(e){var n=e.pageX,a=e.pageY;i("promo",n,a)}),992<$(window).outerWidth()&&($(".about-me").on("mousemove",function(e){var n=e.pageX,a=e.pageY;i("about-me",n,a," rotate("+n/5+"deg)")}),$(".result").on("mousemove",function(e){var n=e.pageX,a=e.pageY;i("result",n,a," rotate(15deg)")}),$(".additionally").on("mousemove",function(e){var n=e.pageX,a=e.pageY;i("additionally",n,a," rotate(-15deg)")}),$(".partnership").on("mousemove",function(e){var n=e.pageX,a=e.pageY;i("partnership",n,a," rotate(15deg)")}),e=$(".partnership"),n=e.find(".btn-assessment, .btn-contact"),a=e.find(".parallax__item"),n.on("mouseenter",function(){a.each(function(e,n){$(n).css({color:"#434340"})})}),n.on("mouseleave",function(){a.each(function(e,n){$(n).css({color:"#2a2a28"})})})),function(){0<$("section.order").length&&($(".input-num").each(function(){var e=$(this),n=e.find("input.number"),a=+n.val(),t=e.find(".arrows > .up"),i=e.find(".arrows > .down"),o=+n.attr("data-min"),r=+n.attr("data-max");n.keydown(function(e){if(!(46===e.keyCode||8===e.keyCode||35<=e.keyCode&&e.keyCode<=39||65===e.keyCode&&!0===e.ctrlKey))return(!(e.keyCode<48||57<e.keyCode)||!(e.keyCode<96||105<e.keyCode))&&void 0}),n.keyup(function(){a=+n.val()}),t.click(function(){a<r&&(a+=1,n.val(a),d())}),i.click(function(){o<a&&(a-=1,n.val(a),d())})}),d(),$(this).bind("change",d),$(this).bind("input keyup",d))}(),$(".form-validate").each(function(){var n=$(this),a="";"assessment-form"===n.attr("id")&&(a="../php/mail.php"),"contact-form"===n.attr("id")&&(a="../php/contact.php"),n.validate({onsubmit:!1,highlight:function(e){$(e).parent("div").addClass("wrong")},unhighlight:function(e){$(e).parent("div").removeClass("wrong")},rules:{name:{required:!0,maxlength:50},email:{required:{depends:function(){return $(this).val($.trim($(this).val())),!0}},email:!0,maxlength:50},message:{required:!0,maxlength:1e4},deadline:{required:!0,maxlength:50},link:{required:!0,url:!0,maxlength:1e3}},messages:{name:{required:"Введите ваше имя",maxlength:"Слишком много символов"},email:{required:"Для связи нужна ваша электронная почта",email:"Это не выглядит как адрес электронной почты",maxlength:"Слишком много символов"},message:{required:"Напишите пару слов",maxlength:"Слишком много символов"},deadline:{required:"Укажите сроки на верстку",maxlength:"Слишком много символов"},link:{required:"Без макетов я не смогу оценить работу",url:"Пожалуйста, укажите ссылку",maxlength:"Слишком много символов"}}});var t=n.find(".btn-submit"),i=!0;t.click(function(){if(n.valid()&&i)n.submit(function(){return $.ajax({type:"POST",url:a,data:$(this).serialize()}).done(function(){t.addClass("done").val("Отправлено!"),i=!1,setTimeout(function(){location.href="index.html"},2e3)}),!1}),n.submit();else{var e=n.find(".scroll-here").offset().top;$("html, body").animate({scrollTop:e-100},{queue:!1,duration:200})}})})});